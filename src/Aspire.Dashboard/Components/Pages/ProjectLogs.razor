@page "/ProjectLogs/{projectname?}"
@using Aspire.Dashboard.Model;
@implements IAsyncDisposable;

<ResourceLogs @ref="_projectLogs"
              TViewModel="ProjectViewModel"
              ResourceName="@ProjectName"
              ResourceType="Project"
              LogLoadingResources="@LogStatus.LoadingProjects"
              LogNoResourceSelected="@LogStatus.NoProjectSelected"
              LogNotAvailable="@LogStatus.LogsNotYetAvailable"
              UrlPrefix="/ProjectLogs"
              GetResourcesFunc="@(s => s.GetProjectsAsync())"
              WatchResourcesFunc="@((s, l, c) => s.WatchProjectsAsync(l, c))" />

@code {
    [Parameter]
    public string? ProjectName { get; set; }

    private ResourceLogs<ProjectViewModel>? _projectLogs;

    public async ValueTask DisposeAsync()
    {
        if (_projectLogs is not null)
        {
            await _projectLogs.DisposeAsync();
        }
    }
}
