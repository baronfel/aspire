@page "/ContainerLogs/{containername?}"
@using Aspire.Dashboard.Model
@implements IAsyncDisposable

<ResourceLogs @ref="_containerLogs"
              TViewModel="ContainerViewModel"
              ResourceName="@ContainerName"
              ResourceType="Container"
              LogLoadingResources="@LogStatus.LoadingContainers"
              LogNoResourceSelected="@LogStatus.NoContainerSelected"
              LogNotAvailable="@LogStatus.FailedToInitialize"
              UrlPrefix="/ContainerLogs"
              GetResourcesFunc="@(s => s.GetContainersAsync())"
              WatchResourcesFunc="@((s, l, c) => s.WatchContainersAsync(l, c))" />

@code {
    [Parameter]
    public string? ContainerName { get; set; }

    private ResourceLogs<ContainerViewModel>? _containerLogs;

    public async ValueTask DisposeAsync()
    {
        if (_containerLogs is not null)
        {
            await _containerLogs.DisposeAsync();
        }
    }
}
