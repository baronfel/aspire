@page "/ExecutableLogs/{executablename?}"
@using Aspire.Dashboard.Model;
@implements IAsyncDisposable;

<ResourceLogs @ref="_executableLogs"
              TViewModel="ExecutableViewModel"
              ResourceName="@ExecutableName"
              ResourceType="Executable"
              LogLoadingResources="@LogStatus.LoadingExecutables"
              LogNoResourceSelected="@LogStatus.NoExecutableSelected"
              LogNotAvailable="@LogStatus.LogsNotYetAvailable"
              UrlPrefix="/ExecutableLogs"
              GetResourcesFunc="@(s => s.GetExecutablesAsync())"
              WatchResourcesFunc="@((s, l, c) => s.WatchExecutablesAsync(l, c))" />

@code {
    [Parameter]
    public string? ExecutableName { get; set; }

    private ResourceLogs<ExecutableViewModel>? _executableLogs;

    public async ValueTask DisposeAsync()
    {
        if (_executableLogs is not null)
        {
            await _executableLogs.DisposeAsync();
        }
    }
}
